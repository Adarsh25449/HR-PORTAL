{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adars\\\\OneDrive\\\\Documents\\\\Desktop\\\\hr-portal\\\\client\\\\src\\\\pages\\\\LeaveForm.js\",\n  _s = $RefreshSig$();\n// client/src/pages/LeaveForm.js\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./LeaveForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LeaveForm = () => {\n  _s();\n  const [fromDate, setFromDate] = useState(\"\");\n  const [toDate, setToDate] = useState(\"\");\n  const [reason, setReason] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async e => {\n    e && e.preventDefault();\n    if (!fromDate || !toDate || !reason.trim()) {\n      alert(\"⚠️ Please fill in all fields\");\n      return;\n    }\n    if (new Date(fromDate) > new Date(toDate)) {\n      alert(\"⚠️ 'From' date cannot be after 'To' date\");\n      return;\n    }\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (!user || !user._id) {\n      alert(\"Please login to apply for leave\");\n      return;\n    }\n    setLoading(true);\n    try {\n      var _res$data;\n      const payload = {\n        employeeId: user._id,\n        fromDate,\n        toDate,\n        reason: reason.trim()\n      };\n      const res = await axios.post(\"http://localhost:5000/api/leave/apply\", payload, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      alert(((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message) || \"Leave applied\");\n      setFromDate(\"\");\n      setToDate(\"\");\n      setReason(\"\");\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      // show server error message if present\n      const msg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message;\n      console.error(\"Error applying leave:\", err);\n      alert(`❌ Failed to apply leave: ${msg}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Apply Leave\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"From\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: fromDate,\n          onChange: e => setFromDate(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"To\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: toDate,\n          onChange: e => setToDate(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Reason\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: 4,\n          value: reason,\n          onChange: e => setReason(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form-button\",\n        disabled: loading,\n        children: loading ? \"Submitting...\" : \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(LeaveForm, \"W/zm0VHAORAlBAH3A/Qegg6xPvU=\");\n_c = LeaveForm;\nexport default LeaveForm;\nvar _c;\n$RefreshReg$(_c, \"LeaveForm\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","LeaveForm","_s","fromDate","setFromDate","toDate","setToDate","reason","setReason","loading","setLoading","handleSubmit","e","preventDefault","trim","alert","Date","user","JSON","parse","localStorage","getItem","_id","_res$data","payload","employeeId","res","post","headers","data","message","err","_err$response","_err$response$data","_err$response2","_err$response2$data","msg","response","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","rows","disabled","_c","$RefreshReg$"],"sources":["C:/Users/adars/OneDrive/Documents/Desktop/hr-portal/client/src/pages/LeaveForm.js"],"sourcesContent":["// client/src/pages/LeaveForm.js\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./LeaveForm.css\";\r\n\r\nconst LeaveForm = () => {\r\n  const [fromDate, setFromDate] = useState(\"\");\r\n  const [toDate, setToDate] = useState(\"\");\r\n  const [reason, setReason] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e && e.preventDefault();\r\n\r\n    if (!fromDate || !toDate || !reason.trim()) {\r\n      alert(\"⚠️ Please fill in all fields\");\r\n      return;\r\n    }\r\n\r\n    if (new Date(fromDate) > new Date(toDate)) {\r\n      alert(\"⚠️ 'From' date cannot be after 'To' date\");\r\n      return;\r\n    }\r\n\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!user || !user._id) {\r\n      alert(\"Please login to apply for leave\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const payload = {\r\n        employeeId: user._id,\r\n        fromDate,\r\n        toDate,\r\n        reason: reason.trim(),\r\n      };\r\n\r\n      const res = await axios.post(\"http://localhost:5000/api/leave/apply\", payload, {\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n\r\n      alert(res.data?.message || \"Leave applied\");\r\n      setFromDate(\"\");\r\n      setToDate(\"\");\r\n      setReason(\"\");\r\n    } catch (err) {\r\n      // show server error message if present\r\n      const msg = err?.response?.data?.error || err?.response?.data?.message || err.message;\r\n      console.error(\"Error applying leave:\", err);\r\n      alert(`❌ Failed to apply leave: ${msg}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-container\">\r\n      <h2>Apply Leave</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-row\">\r\n          <label>From</label>\r\n          <input\r\n            type=\"date\"\r\n            value={fromDate}\r\n            onChange={(e) => setFromDate(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>To</label>\r\n          <input\r\n            type=\"date\"\r\n            value={toDate}\r\n            onChange={(e) => setToDate(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-row\">\r\n          <label>Reason</label>\r\n          <textarea\r\n            rows={4}\r\n            value={reason}\r\n            onChange={(e) => setReason(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"form-button\" disabled={loading}>\r\n          {loading ? \"Submitting...\" : \"Submit\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveForm;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMc,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,IAAIA,CAAC,CAACC,cAAc,CAAC,CAAC;IAEvB,IAAI,CAACV,QAAQ,IAAI,CAACE,MAAM,IAAI,CAACE,MAAM,CAACO,IAAI,CAAC,CAAC,EAAE;MAC1CC,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACF;IAEA,IAAI,IAAIC,IAAI,CAACb,QAAQ,CAAC,GAAG,IAAIa,IAAI,CAACX,MAAM,CAAC,EAAE;MACzCU,KAAK,CAAC,0CAA0C,CAAC;MACjD;IACF;IAEA,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrD,IAAI,CAACJ,IAAI,IAAI,CAACA,IAAI,CAACK,GAAG,EAAE;MACtBP,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IAEAL,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MAAA,IAAAa,SAAA;MACF,MAAMC,OAAO,GAAG;QACdC,UAAU,EAAER,IAAI,CAACK,GAAG;QACpBnB,QAAQ;QACRE,MAAM;QACNE,MAAM,EAAEA,MAAM,CAACO,IAAI,CAAC;MACtB,CAAC;MAED,MAAMY,GAAG,GAAG,MAAM5B,KAAK,CAAC6B,IAAI,CAAC,uCAAuC,EAAEH,OAAO,EAAE;QAC7EI,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB;MAChD,CAAC,CAAC;MAEFb,KAAK,CAAC,EAAAQ,SAAA,GAAAG,GAAG,CAACG,IAAI,cAAAN,SAAA,uBAARA,SAAA,CAAUO,OAAO,KAAI,eAAe,CAAC;MAC3C1B,WAAW,CAAC,EAAE,CAAC;MACfE,SAAS,CAAC,EAAE,CAAC;MACbE,SAAS,CAAC,EAAE,CAAC;IACf,CAAC,CAAC,OAAOuB,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZ;MACA,MAAMC,GAAG,GAAG,CAAAL,GAAG,aAAHA,GAAG,wBAAAC,aAAA,GAAHD,GAAG,CAAEM,QAAQ,cAAAL,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAeH,IAAI,cAAAI,kBAAA,uBAAnBA,kBAAA,CAAqBK,KAAK,MAAIP,GAAG,aAAHA,GAAG,wBAAAG,cAAA,GAAHH,GAAG,CAAEM,QAAQ,cAAAH,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAeL,IAAI,cAAAM,mBAAA,uBAAnBA,mBAAA,CAAqBL,OAAO,KAAIC,GAAG,CAACD,OAAO;MACrFS,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEP,GAAG,CAAC;MAC3ChB,KAAK,CAAC,4BAA4BqB,GAAG,EAAE,CAAC;IAC1C,CAAC,SAAS;MACR1B,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACEV,OAAA;IAAKwC,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7BzC,OAAA;MAAAyC,QAAA,EAAI;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACpB7C,OAAA;MAAM8C,QAAQ,EAAEnC,YAAa;MAAA8B,QAAA,gBAC3BzC,OAAA;QAAKwC,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACvBzC,OAAA;UAAAyC,QAAA,EAAO;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACnB7C,OAAA;UACE+C,IAAI,EAAC,MAAM;UACXC,KAAK,EAAE7C,QAAS;UAChB8C,QAAQ,EAAGrC,CAAC,IAAKR,WAAW,CAACQ,CAAC,CAACsC,MAAM,CAACF,KAAK,CAAE;UAC7CG,QAAQ;QAAA;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN7C,OAAA;QAAKwC,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACvBzC,OAAA;UAAAyC,QAAA,EAAO;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACjB7C,OAAA;UACE+C,IAAI,EAAC,MAAM;UACXC,KAAK,EAAE3C,MAAO;UACd4C,QAAQ,EAAGrC,CAAC,IAAKN,SAAS,CAACM,CAAC,CAACsC,MAAM,CAACF,KAAK,CAAE;UAC3CG,QAAQ;QAAA;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN7C,OAAA;QAAKwC,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACvBzC,OAAA;UAAAyC,QAAA,EAAO;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrB7C,OAAA;UACEoD,IAAI,EAAE,CAAE;UACRJ,KAAK,EAAEzC,MAAO;UACd0C,QAAQ,EAAGrC,CAAC,IAAKJ,SAAS,CAACI,CAAC,CAACsC,MAAM,CAACF,KAAK,CAAE;UAC3CG,QAAQ;QAAA;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAEN7C,OAAA;QAAQ+C,IAAI,EAAC,QAAQ;QAACP,SAAS,EAAC,aAAa;QAACa,QAAQ,EAAE5C,OAAQ;QAAAgC,QAAA,EAC7DhC,OAAO,GAAG,eAAe,GAAG;MAAQ;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;AAAC3C,EAAA,CA5FID,SAAS;AAAAqD,EAAA,GAATrD,SAAS;AA8Ff,eAAeA,SAAS;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}